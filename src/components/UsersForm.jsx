import axios from 'axios';
import React, { useEffect } from 'react';
import { useForm } from 'react-hook-form';

const UsersForm = ({getUser,userSelected,onClickusersSelected}) => {

    const {handleSubmit,register,reset}=useForm()

    const empyUser = {  email: "",
                        password: "",
                        first_name: "",
                        last_name: "",
                        birthday: ""}

    useEffect(()=>{

        if (userSelected) {
            reset(userSelected)
        } else {
            reset(empyUser)
        }

    },[userSelected])

    const submit =(data)=>{
        if (userSelected) {
            axios.put(`https://users-crud.academlo.tech/users/${userSelected.id}/`,data)
            .then(()=>{
                getUser()
                onClickusersSelected(null)
            })
        } else {
            axios.post('https://users-crud.academlo.tech/users/',data)
            .then(()=>{
                getUser()
                reset(empyUser)
            })
        }
        
    }

    

    return (
        <form className='container-form' onSubmit={handleSubmit(submit)}>
            <svg className='image' viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><g id="man-user-people-boy-avatar"><path d="m37 13-17 5v7c0 .34.01.67.04 1s.07.65.12.97a12.006 12.006 0 0 0 7.84 9.34 11.939 11.939 0 0 0 8 0 12.006 12.006 0 0 0 7.84-9.34c.05-.32.09-.64.12-.97s.04-.66.04-1v-7z" fill="#ffc477"/><path d="m44 18v7c0 .34-.01.67-.04 1s-.07.65-.12.97a12.006 12.006 0 0 1 -7.84 9.34 11.8 11.8 0 0 1 -4 .69 12 12 0 0 1 -2-.17 11.082 11.082 0 0 0 2-.52 12.006 12.006 0 0 0 7.84-9.34c.05-.32.09-.64.12-.97s.04-.66.04-1v-7l-5.83-4.17 2.83-.83z" fill="#ffa733"/><path d="m41.24 42.38 4.76 7.62-5 2 5 4-6 5v-16-2.95z" fill="#57565c"/><path d="m24 45v16l-6-5 5-4-5-2 4.76-7.62 1.24-.33z" fill="#57565c"/><path d="m55 52.17v8.83h-15l6-5-5-4 5-2-4.76-7.62 7.8 2.05a8 8 0 0 1 5.96 7.74z" fill="#898890"/><path d="m55 52.17v8.83h-4v-8.83a8 8 0 0 0 -5.96-7.74l-3.01-.79-.79-1.26 7.8 2.05a8 8 0 0 1 5.96 7.74z" fill="#787680"/><path d="m47 19.36a4 4 0 0 1 -3 6.64h-.04c.03-.33.04-.66.04-1v-7a3.984 3.984 0 0 1 3 1.36z" fill="#ffc477"/><path d="m47 18v1.36a3.984 3.984 0 0 0 -3-1.36l-7-5-17 5a3.984 3.984 0 0 0 -3 1.36v-1.36a15 15 0 0 1 30 0z" fill="#ffd422"/><path d="m47 18v1.36a3.984 3.984 0 0 0 -3-1.36l-1.02-.73a15.013 15.013 0 0 0 -12.98-14.13 14.6 14.6 0 0 1 2-.14 15.023 15.023 0 0 1 15 15z" fill="#ebbf00"/><path d="m40 45v16h-16v-16a15 15 0 0 0 8 2 15 15 0 0 0 8-2z" fill="#c0ab91"/><path d="m40 42.05v2.95a15 15 0 0 1 -8 2 15 15 0 0 1 -8-2v-2.95l4-1.05v-4.69a11.939 11.939 0 0 0 8 0v4.69z" fill="#ffc477"/><path d="m24 61h-15v-8.83a8 8 0 0 1 5.96-7.74l7.8-2.05-4.76 7.62 5 2-5 4z" fill="#898890"/><path d="m20.04 26h-.04a4 4 0 0 1 -3-6.64 3.984 3.984 0 0 1 3-1.36v7c0 .34.01.67.04 1z" fill="#ffc477"/><path d="m29 23a3 3 0 0 0 -6 0h2a1 1 0 0 1 2 0z"/><path d="m38 22a1 1 0 0 1 1 1h2a3 3 0 0 0 -6 0h2a1 1 0 0 1 1-1z"/><path d="m49.29 43.46-12.29-3.23v-3.23a13.022 13.022 0 0 0 7.84-10.08 4.967 4.967 0 0 0 3.16-7.89v-1.03a16 16 0 0 0 -32 0v1.03a4.939 4.939 0 0 0 -1 2.97 4.982 4.982 0 0 0 4.16 4.92 13.037 13.037 0 0 0 7.84 10.08v3.23l-12.3 3.23a9.03 9.03 0 0 0 -6.7 8.71v8.83a1 1 0 0 0 1 1h46a1 1 0 0 0 1-1v-8.83a9.028 9.028 0 0 0 -6.71-8.71zm-8.29.42 3.52 5.64-3.52 1.4zm6-21.88a3.022 3.022 0 0 1 -.87 2.12 2.951 2.951 0 0 1 -1.13.69v-5.63a3.01 3.01 0 0 1 2 2.82zm-28 2.82a3.179 3.179 0 0 1 -1.12-.69 3 3 0 0 1 1.12-4.95zm-.97-7.41a13.973 13.973 0 0 1 23.86-9.3 13.808 13.808 0 0 1 4.08 9.3 4.738 4.738 0 0 0 -1.6-.37l-6.79-4.85a1.015 1.015 0 0 0 -.86-.15l-16.94 4.98a4.859 4.859 0 0 0 -1.75.39zm2.97 7.59v-6.25l15.82-4.65 6.18 4.41v6.49a11 11 0 0 1 -22 0zm-11 35v-7.83a7.008 7.008 0 0 1 5.21-6.77l5.37-1.41-3.43 5.48a1.032 1.032 0 0 0 -.1.84.99.99 0 0 0 .58.62l3.41 1.36-3.66 2.93a.981.981 0 0 0 -.38.77 1.013 1.013 0 0 0 .36.78l3.88 3.23zm13-1.13-3.42-2.85 3.42-2.74zm0-7.95-3.52-1.4 3.52-5.64zm16 9.08h-14v-13.33a17.758 17.758 0 0 0 7 1.33 17.758 17.758 0 0 0 7-1.33zm0-15.57a14.846 14.846 0 0 1 -7 1.57 14.846 14.846 0 0 1 -7-1.57v-1.61l3.25-.85a1.014 1.014 0 0 0 .75-.97v-3.36a12.68 12.68 0 0 0 6 0v3.36a1.014 1.014 0 0 0 .75.97l3.25.85zm2 8.85 3.42 2.74-3.42 2.85zm13 6.72h-11.24l3.88-3.23a1.013 1.013 0 0 0 .36-.78.981.981 0 0 0 -.38-.77l-3.66-2.93 3.41-1.36a.99.99 0 0 0 .58-.62 1.032 1.032 0 0 0 -.1-.84l-3.43-5.48 5.36 1.41a7.006 7.006 0 0 1 5.22 6.77z"/><path d="m37 29h-2c0 .249-1.064 1-3 1s-3-.751-3-1h-2c0 1.71 2.149 3 5 3s5-1.29 5-3z"/></g></svg>
                <h4>New User</h4>
                <div className="container-name">
                    <div className='container-first-name'>
                        <label htmlFor="first_name">First Name</label>
                        <div className="container-icon-input">
                            <svg className='icon' version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"  x="0px" y="0px" viewBox="0 0 512 512"><g><g><path d="M299.287,255.5h-86.574c-85.147,0-154.418,69.272-154.418,154.418V512h395.41V409.918 C453.705,324.772,384.434,255.5,299.287,255.5z"/></g></g><g><g><path d="M256,0c-65.843,0-119.409,53.567-119.409,119.41c0,65.842,53.566,119.409,119.409,119.409s119.409-53.567,119.409-119.41 C375.409,53.567,321.843,0,256,0z"/></g></g></svg>

                            <input type="text" id='first_name' placeholder='Firs name' required
                            {...register('first_name')}/>
                        </div>
                        
                    </div>
                    <div className='container-last-name'>
                        <label htmlFor="last_name">Last Name</label>
                        <input type="text" id='last_name' placeholder='Last name' required
                        {...register('last_name')}/>
                    </div>
                </div>
            
                <div className='container-input'>
                    <label htmlFor="email">Email</label>
                    <div className="container-email">

                    <svg className='icon' viewBox="0 -69 512.01829 512" xmlns="http://www.w3.org/2000/svg"><path d="m512 12.042969-185.726562 175.394531 185.746093 175.40625zm0 0"/><path d="m268.589844 241.910156c-7.074219 6.660156-18.105469 6.660156-25.179688 0l-44.371094-41.902344-185.160156 174.859376h484.242188l-185.160156-174.859376zm0 0"/><path d="m0 12.042969v350.792969l185.726562-175.398438zm0 0"/><path d="m498.121094.0078125h-484.242188l242.121094 228.5742185zm-86.691406 18.2851565h18.285156c5.050781 0 9.140625 4.09375 9.140625 9.144531s-4.089844 9.144531-9.140625 9.144531h-18.285156c-5.050782 0-9.144532-4.09375-9.144532-9.144531s4.09375-9.144531 9.144532-9.144531zm-310.859376 18.289062h-18.285156c-5.050781 0-9.140625-4.09375-9.140625-9.144531s4.089844-9.144531 9.140625-9.144531h18.285156c5.050782 0 9.144532 4.09375 9.144532 9.144531s-4.09375 9.144531-9.144532 9.144531zm27.429688-9.144531c0-5.050781 4.09375-9.144531 9.144531-9.144531h237.710938c5.050781 0 9.144531 4.09375 9.144531 9.144531s-4.09375 9.144531-9.144531 9.144531h-237.710938c-5.050781 0-9.144531-4.09375-9.144531-9.144531zm0 0"/></svg>

                        <input type="text" id='email' placeholder='Email' required
                        {...register('email')}/>
                    </div>
                    
                </div>
                <div className='container-input'>
                    <label htmlFor="password">Password</label>
                    <div className="container-password">

                        <svg className='icon'  viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g><path d="m149.541 127.295c4.871-54.46 50.753-97.295 106.459-97.295s101.588 42.835 106.459 97.295h30.094c-4.944-71.021-64.296-127.295-136.553-127.295s-131.609 56.274-136.553 127.295z"/><path d="m428.815 157.295h-345.629c-29.046 0-52.677 23.63-52.677 52.676v249.352c0 29.047 23.631 52.677 52.677 52.677h345.629c29.046 0 52.677-23.63 52.677-52.676v-249.353c-.001-29.046-23.632-52.676-52.677-52.676zm-158.39 290.475c-1.816 6.378-7.784 10.909-14.425 10.909-6.407 0-12.232-4.229-14.238-10.302-2.051-6.207.277-13.187 5.609-16.96 5.043-3.569 11.944-3.581 17.046-.143 5.289 3.566 7.753 10.368 6.008 16.496zm35.185-116.447c-9.367 9.865-21.5 16.667-34.61 19.636v42.535c0 8.284-6.716 15-15 15s-15-6.716-15-15v-55.852c0-8.284 6.716-15 15-15 10.63 0 20.523-4.253 27.855-11.975 7.326-7.717 11.057-17.838 10.504-28.5-1.037-19.974-17.534-35.936-37.558-36.34-.263-.005-.525-.008-.786-.008-19.123 0-35.409 14.074-38.055 33.035-.247 1.767-.372 3.575-.372 5.376 0 8.284-6.716 15-15 15s-15-6.716-15-15c0-3.183.222-6.387.66-9.523 4.717-33.799 33.716-58.889 67.759-58.889.466 0 .931.005 1.398.014 35.674.719 65.065 29.173 66.913 64.779.983 18.96-5.66 36.97-18.708 50.712z"/></g></svg>

                        <input type="password" id='password' placeholder='Password' required
                        {...register('password')}/>
                    </div>
                    
                </div>
                <div className='container-input'>
                <label htmlFor="birthday">Birthdays</label>
                    <div className="conatiner-birthday">
                        <svg className='icon' version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 480.659 480.659"><g><g><path  d="M392.441,317.283c-1.057-0.268-3.016-0.642-5.739-0.642l0,0c-6.739,0-17.745,2.341-31.872,13.493 c-17.655,13.94-36.709,21.012-56.64,21.012c-34.977,0-58.127-22.41-60.647-24.963l-1.114-1.122l-1-1.227 c-0.13-0.163-14.388-16.306-39.798-16.306c-16.631,0-35.091,6.779-54.852,20.151c-26.426,17.875-49.357,26.564-70.093,26.564 c-7.665,0-14.664-1.244-21.069-3.382v58.908h381.425v-81.562c-0.325,0.008-0.658,0.041-0.984,0.041 C414.225,328.256,399.57,321.29,392.441,317.283z"/><path  d="M456.397,409.81H24.265c-9.575,0-15.062,5.584-12.242,12.477l41.83,45.894 c2.812,6.893,12.868,12.477,22.443,12.477h328.069c9.575,0,19.622-5.584,22.443-12.477l41.83-45.894 C471.451,415.395,465.972,409.81,456.397,409.81z"/><path d="M445.886,274.624v-54.876c0-64.159-52.007-108.419-116.165-108.419h-71.637V95.072V83.594h-35.522 v11.478v16.257h-71.637c-64.159,0-116.165,44.26-116.165,108.419v54.876c0,0,0.033,26.076,14.843,39.424 c5.088,4.585,11.892,7.681,21.069,7.681c12.469,0,29.255-5.682,51.877-20.98c28.426-19.232,52.933-25.735,73.076-25.735 c42.033,0,65.029,28.32,65.029,28.32s15.119,15.306,37.522,15.306c10.77,0,23.223-3.536,36.489-14.014 c20.85-16.46,39.123-20.492,52.023-20.492c12.388,0,19.817,3.715,19.817,3.715s12.599,7.901,23.54,7.901 c0.333,0,0.65-0.057,0.984-0.073C439.026,295.303,445.886,290.434,445.886,274.624z"/><path d="M240.331,76.132c45.333,4.081,0-76.132,0-76.132S194.998,72.052,240.331,76.132z"/></g></g></svg>

                         <input type="date" id='birthday' required
                        {...register('birthday')} />
                    </div>
                    
                   
                </div>
                <button>Upload</button>
            </form>
    );
};

export default UsersForm;